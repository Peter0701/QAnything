QAnything\multi_upload_files.py展示了一个上传文件的脚本；
前端接口：QAnything\qanything_kernel\qanything_server\sanic_api.py使用Sanic框架，75-76行、79行、82行分别添加了上传网页链接、上传文件、文件列表以及删除文件的路由，这四个功能函数定义在QAnything\qanything_kernel\qanything_server\handler.py；
功能的主要实现：
①QAnything\qanything_kernel\qanything_server\handler.py实现上传网页链接/文件时，调用local_doc_qa.milvus_summary.add_file函数将文件添加到使用mysql管理的知识库，调用local_doc_qa.insert_files_to_milvus函数将文件添加到milvus向量数据库；文件列表功能通过调用local_doc_qa.milvus_summary.get_files函数获取文件信息；删除文件在246-249行完成。
②QAnything\qanything_kernel\core\local_doc_qa的实现：insert_files_to_milvus函数首先将传入的文件进行ocr（ocr服务的url在第40行定义，实现在QAnything\qanything_kernel\dependent_server\ocr_serve\ocr_server.py，使用paddleocr实现），然后对ocr的结果进行转换，在QAnything\qanything_kernel\core\local_file.py中通过函数split_file_to_docs转换为docs（langchain的document），转换时如果doc的文本长度大于chunk_size（默认值800tokens，定义在QAnything\qanything_kernel\core\local_file.py第22行），则利用text_splitter将其拆分成多个doc。拆分后，insert_files_to_milvus函数调用local_file.create_embedding函数创建embedding（embedding服务为有道自己的BCEmbedding，具体实现在QAnything\qanything_kernel\connector\embedding），然后向milvus数据库插入以上信息。